---
import AdminLayout from '../../layouts/AdminLayout.astro';

const stakeholders = [
  // Clients
  { id: '1', name: 'Lisa Harrison', role: 'Client', company: '', email: 'lisa@harrison.com', phone: '203-555-0101', channel: 'both', projects: ['Greenwich Estate'] },
  { id: '2', name: 'David Chen', role: 'Client', company: '', email: 'david@chenfamily.com', phone: '203-555-0201', channel: 'email', projects: ['Westport Modern'] },
  { id: '3', name: 'Patricia Wright', role: 'Client', company: '', email: 'patricia@wright.com', phone: '203-555-0301', channel: 'both', projects: ['Darien Historic'] },
  { id: '4', name: 'Amy Mitchell', role: 'Client', company: '', email: 'amy@mitchell.com', phone: '203-555-0401', channel: 'email', projects: ['New Canaan Residence'] },

  // Architects
  { id: '5', name: 'Sarah Chen', role: 'Architect', company: 'Chen Design Group', email: 'sarah@chendesign.com', phone: '203-555-0102', channel: 'email', projects: ['Greenwich Estate'] },
  { id: '6', name: 'James Wong', role: 'Architect', company: 'Modern CT Architecture', email: 'james@modernct.com', phone: '203-555-0202', channel: 'both', projects: ['Westport Modern'] },
  { id: '7', name: 'Robert Mills', role: 'Preservation Architect', company: 'Heritage Design', email: 'robert@heritagedesign.com', phone: '203-555-0302', channel: 'email', projects: ['Darien Historic'] },
  { id: '8', name: 'Tom Bradley', role: 'Architect', company: 'Bradley Associates', email: 'tom@bradleyarch.com', phone: '203-555-0402', channel: 'sms', projects: ['New Canaan Residence'] },

  // Contractors
  { id: '9', name: 'Mark Thompson', role: 'General Contractor', company: 'Thompson Builders', email: 'mark@thompsonbuilders.com', phone: '203-555-0103', channel: 'sms', projects: ['Greenwich Estate'] },
  { id: '10', name: 'Steve Palmer', role: 'General Contractor', company: 'Palmer Construction', email: 'steve@palmerconstruction.com', phone: '203-555-0303', channel: 'both', projects: ['Darien Historic'] },

  // Designers
  { id: '11', name: 'Emily Ross', role: 'Interior Designer', company: 'Ross Interiors', email: 'emily@rossinteriors.com', phone: '203-555-0104', channel: 'both', projects: ['Greenwich Estate'] }
];

const roleColors = {
  'Client': 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30',
  'Architect': 'bg-blue-500/20 text-blue-400 border-blue-500/30',
  'Preservation Architect': 'bg-blue-500/20 text-blue-400 border-blue-500/30',
  'General Contractor': 'bg-amber-500/20 text-amber-400 border-amber-500/30',
  'Interior Designer': 'bg-purple-500/20 text-purple-400 border-purple-500/30'
};

const channelLabels = {
  email: { label: 'Email', class: 'bg-blue-500/10 text-blue-400' },
  sms: { label: 'SMS', class: 'bg-purple-500/10 text-purple-400' },
  both: { label: 'Email + SMS', class: 'bg-emerald-500/10 text-emerald-400' }
};
---

<AdminLayout title="Directory" currentPage="stakeholders">
  <!-- Header -->
  <div class="flex items-center justify-between mb-8">
    <div class="flex items-center gap-4">
      <div class="relative">
        <input
          type="search"
          placeholder="Search contacts..."
          class="w-64 bg-charcoal-light border border-charcoal-border rounded-lg px-4 py-2 pl-10 text-sm text-cream placeholder:text-cream/40 focus:outline-none focus:border-brass/50"
        />
        <svg class="w-4 h-4 text-cream/40 absolute left-3 top-1/2 -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </div>

      <select class="bg-charcoal-light border border-charcoal-border rounded-lg px-4 py-2 text-sm text-cream/70 focus:outline-none focus:border-brass/50">
        <option value="all">All Roles</option>
        <option value="client">Clients</option>
        <option value="architect">Architects</option>
        <option value="contractor">Contractors</option>
        <option value="designer">Designers</option>
      </select>

      <select class="bg-charcoal-light border border-charcoal-border rounded-lg px-4 py-2 text-sm text-cream/70 focus:outline-none focus:border-brass/50">
        <option value="all">All Projects</option>
        <option value="greenwich-estate">Greenwich Estate</option>
        <option value="westport-modern">Westport Modern</option>
        <option value="darien-historic">Darien Historic</option>
        <option value="new-canaan">New Canaan Residence</option>
      </select>
    </div>

    <button class="flex items-center gap-2 px-4 py-2 bg-brass text-charcoal text-sm font-medium rounded-lg hover:bg-brass-light transition-colors">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
      </svg>
      Add Contact
    </button>
  </div>

  <!-- Stats -->
  <div class="grid grid-cols-4 gap-4 mb-8">
    <div class="bg-charcoal-light border border-charcoal-border rounded-lg p-4 text-center">
      <div class="text-2xl font-semibold text-cream">11</div>
      <div class="text-sm text-cream/50">Total Contacts</div>
    </div>
    <div class="bg-charcoal-light border border-charcoal-border rounded-lg p-4 text-center">
      <div class="text-2xl font-semibold text-emerald-400">4</div>
      <div class="text-sm text-cream/50">Clients</div>
    </div>
    <div class="bg-charcoal-light border border-charcoal-border rounded-lg p-4 text-center">
      <div class="text-2xl font-semibold text-blue-400">4</div>
      <div class="text-sm text-cream/50">Architects</div>
    </div>
    <div class="bg-charcoal-light border border-charcoal-border rounded-lg p-4 text-center">
      <div class="text-2xl font-semibold text-amber-400">2</div>
      <div class="text-sm text-cream/50">Contractors</div>
    </div>
  </div>

  <!-- Contacts Grid -->
  <div class="bg-charcoal-light border border-charcoal-border rounded-lg overflow-hidden">
    <table class="w-full">
      <thead>
        <tr class="border-b border-charcoal-border">
          <th class="text-left text-xs text-cream/40 font-medium uppercase tracking-wider px-6 py-4">Contact</th>
          <th class="text-left text-xs text-cream/40 font-medium uppercase tracking-wider px-6 py-4">Role</th>
          <th class="text-left text-xs text-cream/40 font-medium uppercase tracking-wider px-6 py-4">Projects</th>
          <th class="text-left text-xs text-cream/40 font-medium uppercase tracking-wider px-6 py-4">Preferred Channel</th>
          <th class="text-right text-xs text-cream/40 font-medium uppercase tracking-wider px-6 py-4">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-charcoal-border">
        {stakeholders.map((person) => (
          <tr class="hover:bg-charcoal-border/30 transition-colors">
            <td class="px-6 py-4">
              <div class="flex items-center gap-4">
                <div class="w-10 h-10 rounded-full bg-brass/20 flex items-center justify-center flex-shrink-0">
                  <span class="text-brass font-medium text-sm">{person.name.split(' ').map(n => n[0]).join('')}</span>
                </div>
                <div>
                  <div class="text-cream font-medium">{person.name}</div>
                  <div class="text-sm text-cream/50">
                    {person.email}
                    {person.phone && <span class="ml-2 text-cream/30">Â·</span>}
                    {person.phone && <span class="ml-2">{person.phone}</span>}
                  </div>
                </div>
              </div>
            </td>
            <td class="px-6 py-4">
              <div>
                <span class={`text-xs px-2 py-0.5 rounded-full border ${roleColors[person.role] || 'bg-charcoal text-cream/50 border-charcoal-border'}`}>
                  {person.role}
                </span>
                {person.company && (
                  <div class="text-sm text-cream/40 mt-1">{person.company}</div>
                )}
              </div>
            </td>
            <td class="px-6 py-4">
              <div class="flex flex-wrap gap-1">
                {person.projects.map((project) => (
                  <a href={`/admin/projects/${project.toLowerCase().replace(' ', '-')}`} class="text-sm text-brass hover:text-brass-light transition-colors">
                    {project}
                  </a>
                ))}
              </div>
            </td>
            <td class="px-6 py-4">
              <span class={`text-xs px-2 py-1 rounded ${channelLabels[person.channel].class}`}>
                {channelLabels[person.channel].label}
              </span>
            </td>
            <td class="px-6 py-4">
              <div class="flex items-center justify-end gap-1">
                <button
                  class="p-2 text-cream/50 hover:text-cream hover:bg-charcoal rounded-lg transition-colors"
                  title="Send Email"
                >
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                  </svg>
                </button>
                <button
                  class="p-2 text-cream/50 hover:text-cream hover:bg-charcoal rounded-lg transition-colors"
                  title="Send SMS"
                >
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z" />
                  </svg>
                </button>
                <button
                  class="p-2 text-cream/50 hover:text-cream hover:bg-charcoal rounded-lg transition-colors"
                  title="Edit Contact"
                >
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                  </svg>
                </button>
              </div>
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  </div>
</AdminLayout>
